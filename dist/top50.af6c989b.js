let e;function t(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var a=globalThis,n={},r={},o=a.parcelRequire2955;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},a.parcelRequire2955=o);var l=o.register;l("8nUlx",function(e,a){t(e.exports,"getElement",()=>n),t(e.exports,"getElements",()=>r),t(e.exports,"setElementText",()=>o);let n=e=>document.querySelector(e),r=e=>document.querySelectorAll(e),o=(e,t)=>{r(e).forEach(e=>e.textContent=t)}}),l("4WPy0",function(e,a){t(e.exports,"handleDataUrl",()=>r),t(e.exports,"handleBatchDataUrl",()=>l);var n=o("8nUlx");let r=()=>{let e=document.querySelectorAll("[data-url]");console.log(e),e.forEach(e=>{let t=e.getAttribute("data-url");e.addEventListener("click",e=>{e.preventDefault(),console.log(t),window.location.href=t})})},l=()=>{(0,n.getElement)(".books").addEventListener("click",e=>{let t=e.target.closest("[data-url]");if(!t)return;e.preventDefault();let a=t.getAttribute("data-url");window.location.href=a})}});const i=e=>new Promise((t,a)=>setTimeout(a.bind(void 0,"Response Timeout!! Internet Connection too slow"),e)),s=async e=>{try{let t=await Promise.race([fetch(e),i(7e3)]);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return t.json()}catch(e){throw e}};var c=o("8nUlx");const u=(0,c.getElement)(".pagination__btns"),g=(0,c.getElement)(".prev.pagination__btn"),d=(0,c.getElement)(".next.pagination__btn"),p=(0,c.getElements)(".page.pagination__btn"),h=(0,c.getElement)("#page-number");class m{constructor(e){this.currentPage=1,this.pages=e}handlePagination=e=>{u.addEventListener("click",t=>{let a=t.target;if(!a.classList.contains("pagination__btn"))return;let n=parseInt(a.dataset.pageNumber);console.log(n),n<=0||n>this.pages||e(n)})};updateBtns=()=>{g.dataset.pageNumber=this.currentPage-1,d.dataset.pageNumber=this.currentPage+1,c.getElement(".pagination__btn--active")?.classList?.remove("pagination__btn--active");let e=[];for(let t=1;t<=5;t++){let a=this.currentPage-3+t;a>0&&a<=this.pages&&e.push(a)}console.log(e),e.slice(-3).forEach((e,t)=>{p[t].dataset.pageNumber=e,p[t].textContent=e}),p.forEach(e=>{parseInt(e.dataset.pageNumber)===this.currentPage&&e.classList.add("pagination__btn--active")}),h.value=this.currentPage};setPageNumber=e=>{this.currentPage=e,this.updateBtns()}}var c=o("8nUlx"),b=o("4WPy0");let v=[],f=1;const E=(e,t,a)=>`
    <div class="book book-details">
        <div class="book-cover card-front">
            <img src="${a}" alt="Book cover" />
        </div>
        <div class="book-info card-back">
            <h3 class="book-title ">${e}</h3>
            <p class="book-author">${t}</p>
            <a href="#" data-url="/book?book=${encodeURIComponent(e)}" class="btn btn-primary">Read More</a>
        </div>
    </div>
`,x=e=>{let t=document.querySelector(".books");t.innerHTML="",e.forEach(e=>{t.innerHTML+=E(e.title,e.author,e.image)})},_=function(e){f=e,this.setPageNumber(f);let t=(f-1)*9,a=Math.min(v.length,9*f);(0,c.setElementText)(".current-page",f),(0,c.setElementText)(".low-limit",t+1),(0,c.setElementText)(".high-limit",a),x(v.slice(t,a))},P={"a-z":(e,t)=>e.title.localeCompare(t.title),"z-a":(e,t)=>t.title.localeCompare(e.title)},k=t=>{v.sort(P[t]),_.call(e,1)};document.querySelector("#sort-by").addEventListener("change",e=>{k(e.target.value)}),s("http://127.0.0.1:5000/top50").then(t=>{v=Object.entries(t).map(([e,t])=>({title:e.replace(/\\"|\\/g,'"'),...t})),(0,b.handleBatchDataUrl)(),e=new m(Math.ceil(v.length/9)),_.call(e,1),e.handlePagination(_.bind(e))});
//# sourceMappingURL=top50.af6c989b.js.map
