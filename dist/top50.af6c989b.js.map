{"mappings":"IGWI,E,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,a,I,G,E,E,O,C,c,I,G,E,E,O,C,iB,I,GFXG,IAAM,EAAa,AAAC,GAAa,SAAS,aAAa,CAAC,GAClD,EAAc,AAAC,GAAa,SAAS,gBAAgB,CAAC,GACtD,EAAiB,CAAC,EAAU,KACvC,EAAY,GAAU,OAAO,CAAC,AAAC,GAAa,EAAQ,WAAW,CAAG,EACpE,C,G,E,Q,S,C,C,C,E,E,E,O,C,gB,I,G,E,E,O,C,qB,I,G,I,E,E,SCFO,IAAM,EAAgB,KAC3B,IAAM,EAAU,SAAS,gBAAgB,CAAC,cAC1C,QAAQ,GAAG,CAAC,GACZ,EAAQ,OAAO,CAAC,AAAC,IACf,IAAM,EAAM,EAAQ,YAAY,CAAC,YACjC,EAAQ,gBAAgB,CAAC,QAAS,AAAC,IACjC,EAAM,cAAc,GACpB,QAAQ,GAAG,CAAC,GACZ,OAAO,QAAQ,CAAC,IAAI,CAAG,CACzB,EACF,EACF,EAEa,EAAqB,KAEhC,AADc,AAAA,CAAA,EAAA,EAAA,UAAS,AAAT,EAAW,UACnB,gBAAgB,CAAC,QAAS,AAAC,IAC/B,IAAM,EAAS,EAAM,MAAM,CAAC,OAAO,CAAC,cACpC,GAAI,CAAC,EAAQ,OACb,EAAM,cAAc,GACpB,IAAM,EAAM,EAAO,YAAY,CAAC,WAChC,CAAA,OAAO,QAAQ,CAAC,IAAI,CAAG,CACzB,EACF,C,GExBA,MAAM,EAAQ,AAAC,GACb,IAAI,QAAQ,CAAC,EAAG,IACd,WACE,EAAI,IAAI,CAAA,KAAA,EAAO,mDACf,IAIO,EAAU,MAAO,IAC5B,GAAI,CACF,IAAM,EAAW,MAAM,QAAQ,IAAI,CAAC,CAAC,MAAM,GAAM,EAAM,KAAM,EAC7D,GAAI,CAAC,EAAS,EAAE,CACd,MAAM,AAAI,MAAM,CAAC,oBAAoB,EAAE,EAAS,MAAM,CAAC,CAAC,EAE1D,OAAO,EAAS,IAAI,EACtB,CAAE,MAAO,EAAO,CACd,MAAM,CACR,CACF,E,I,E,E,SEhBA,MAAM,EAAiB,AAAA,CAAA,EAAA,EAAA,UAAS,AAAT,EAAW,qBAC5B,EAAU,AAAA,CAAA,EAAA,EAAA,UAAS,AAAT,EAAW,yBACrB,EAAU,AAAA,CAAA,EAAA,EAAA,UAAS,AAAT,EAAW,yBACrB,EAAkB,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,yBAC9B,EAAoB,AAAA,CAAA,EAAA,EAAA,UAAS,AAAT,EAAW,eAE9B,OAAM,EACX,YAAY,CAAK,CAAE,CACjB,IAAI,CAAC,WAAW,CAAG,EACnB,IAAI,CAAC,KAAK,CAAG,CACf,CAEA,iBAAmB,AAAC,IAClB,EAAe,gBAAgB,CAAC,QAAS,AAAC,IACxC,IAAM,EAAS,EAAE,MAAM,CACvB,GAAI,CAAC,EAAO,SAAS,CAAC,QAAQ,CAAC,mBAAoB,OAEnD,IAAM,EAAa,SAAS,EAAO,OAAO,CAAC,UAAU,EACrD,QAAQ,GAAG,CAAC,GACR,GAAc,GAAK,EAAa,IAAI,CAAC,KAAK,EAC9C,EAAS,EACX,EACF,CAAE,AAEF,CAAA,WAAa,KACX,EAAQ,OAAO,CAAC,UAAU,CAAG,IAAI,CAAC,WAAW,CAAG,EAChD,EAAQ,OAAO,CAAC,UAAU,CAAG,IAAI,CAAC,WAAW,CAAG,EAChD,AAAA,EAAA,UAAS,CAAE,6BAA6B,WAAW,OACjD,2BAGF,IAAM,EAAc,EAAE,CACtB,IAAK,IAAI,EAAI,EAAG,GAAK,EAAG,IAAK,CAC3B,IAAM,EAAa,IAAI,CAAC,WAAW,CAAG,EAAI,EACtC,EAAa,GAAK,GAAc,IAAI,CAAC,KAAK,EAC5C,EAAY,IAAI,CAAC,EACrB,CACA,QAAQ,GAAG,CAAC,GACZ,EAAY,KAAK,CAAC,IAAI,OAAO,CAAC,CAAC,EAAY,KACzC,CAAe,CAAC,EAAM,CAAC,OAAO,CAAC,UAAU,CAAG,EAC5C,CAAe,CAAC,EAAM,CAAC,WAAW,CAAG,CACvC,GAEA,EAAgB,OAAO,CAAC,AAAC,IACnB,SAAS,EAAI,OAAO,CAAC,UAAU,IAAM,IAAI,CAAC,WAAW,EACvD,EAAI,SAAS,CAAC,GAAG,CAAC,0BACtB,GACA,EAAkB,KAAK,CAAG,IAAI,CAAC,WAAW,AAC5C,CAAE,AAEF,CAAA,cAAgB,AAAC,IACf,IAAI,CAAC,WAAW,CAAG,EACnB,IAAI,CAAC,UAAU,EACjB,CAAE,AACJ,C,I,E,E,S,E,E,SHhDA,IAAI,EAAO,EAAE,CAET,EAAc,EAGlB,MAAM,EAAa,CAAC,EAAM,EAAY,IACpC,CAAC;;;sBAGmB,EAAE,EAAS;;;oCAGG,EAAE,EAAK;mCACR,EAAE,EAAW;6CACH,EAAE,mBACjC,GACA;;;AAGd,CAAC,CAEK,EAAc,AAAC,IACnB,IAAM,EAAY,SAAS,aAAa,CAAC,SACzC,CAAA,EAAU,SAAS,CAAG,GACtB,EAAM,OAAO,CAAC,AAAC,IACb,EAAU,SAAS,EAAI,EAAW,EAAK,KAAK,CAAE,EAAK,MAAM,CAAE,EAAK,KAAK,CACvE,EACF,EAEM,EAAW,SAAU,CAAI,EAC7B,EAAc,EACd,IAAI,CAAC,aAAa,CAAC,GACnB,IAAM,EAAa,AAAC,CAAA,EAAc,CAAA,EEjCjB,EFkCX,EAAa,KAAK,GAAG,CAAC,EAAK,MAAM,CAAE,AElCxB,EFkCwB,GACzC,AAAA,CAAA,EAAA,EAAA,cAAa,AAAb,EAAe,gBAAiB,GAChC,AAAA,CAAA,EAAA,EAAA,cAAa,AAAb,EAAe,aAAc,EAAa,GAC1C,AAAA,CAAA,EAAA,EAAA,cAAa,AAAb,EAAe,cAAe,GAG9B,EADgB,EAAK,KAAK,CAAC,EAAY,GAEzC,EAEM,EAAS,CACb,MAAO,CAAC,EAAG,IAAM,EAAE,KAAK,CAAC,aAAa,CAAC,EAAE,KAAK,EAC9C,MAAO,CAAC,EAAG,IAAM,EAAE,KAAK,CAAC,aAAa,CAAC,EAAE,KAAK,CAChD,EAEM,EAAgB,AAAC,IACrB,EAAK,IAAI,CAAC,CAAM,CAAC,EAAS,EAC1B,EAAS,IAAI,CAAC,EAAmB,EACnC,EAGA,AADiB,SAAS,aAAa,CAAC,YAC/B,gBAAgB,CAAC,SAAU,AAAC,IAEnC,EADiB,EAAE,MAAM,CAAC,KAAK,CAEjC,GAEA,AAAA,EE5DU,+BF4DG,IAAI,CAAC,AAAC,IACjB,EAAO,OAAO,OAAO,CAAC,GAAc,GAAG,CAAC,CAAC,CAAC,EAAK,EAAM,GAC5C,CAAA,CACL,MAAO,EAAI,OAAO,CAAC,UAAW,KAC9B,GAAG,CAAK,AACV,CAAA,GAGF,AAAA,CAAA,EAAA,EAAA,kBAAiB,AAAjB,IAEA,EAAoB,IAAI,EADT,KAAK,IAAI,CAAC,EAAK,MAAM,CEpEnB,IFsEjB,EAAS,IAAI,CAAC,EAAmB,GACjC,EAAkB,gBAAgB,CAAC,EAAS,IAAI,CAAC,GACnD","sources":["<anon>","static/js/domUtils.js","static/js/dataUrlHandler.js","static/js/top50handler.js","static/js/api.js","static/js/config.js","static/js/paginationHandler.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire2955\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire2955\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"8nUlx\", function(module, exports) {\n\n$parcel$export(module.exports, \"getElement\", () => $61ac2def64847fa8$export$d16800b7e59a8051);\n$parcel$export(module.exports, \"getElements\", () => $61ac2def64847fa8$export$73eac51a39d6b0eb);\n$parcel$export(module.exports, \"setElementText\", () => $61ac2def64847fa8$export$1193aae213924971);\nconst $61ac2def64847fa8$export$d16800b7e59a8051 = (selector)=>document.querySelector(selector);\nconst $61ac2def64847fa8$export$73eac51a39d6b0eb = (selector)=>document.querySelectorAll(selector);\nconst $61ac2def64847fa8$export$1193aae213924971 = (selector, text)=>{\n    $61ac2def64847fa8$export$73eac51a39d6b0eb(selector).forEach((element)=>element.textContent = text);\n};\nfunction $61ac2def64847fa8$export$bf89549ab943a430(imageUrl) {\n    imageUrl = imageUrl.replace(\"http://\", \"https://\");\n    $61ac2def64847fa8$export$d16800b7e59a8051(\"#home-section\").style.background = `url${imageUrl}`;\n}\nfunction $61ac2def64847fa8$export$b8d0bb2aa0adefe5(msg, parent = \"#whole-content\") {\n    const error = `<div class=\"error\">${msg}</div>`;\n    $61ac2def64847fa8$export$d16800b7e59a8051(parent).insertAdjacentHTML(\"beforeend\", error);\n}\n\n});\n\nparcelRegister(\"4WPy0\", function(module, exports) {\n\n$parcel$export(module.exports, \"handleDataUrl\", () => $39a490758e6557ae$export$2cb4d324af6458cf);\n$parcel$export(module.exports, \"handleBatchDataUrl\", () => $39a490758e6557ae$export$8718b2c0e8da1d9c);\n\nvar $8nUlx = parcelRequire(\"8nUlx\");\nconst $39a490758e6557ae$export$2cb4d324af6458cf = ()=>{\n    const dataUrl = document.querySelectorAll(\"[data-url]\");\n    console.log(dataUrl);\n    dataUrl.forEach((element)=>{\n        const url = element.getAttribute(\"data-url\");\n        element.addEventListener(\"click\", (event)=>{\n            event.preventDefault();\n            console.log(url);\n            window.location.href = url;\n        });\n    });\n};\nconst $39a490758e6557ae$export$8718b2c0e8da1d9c = ()=>{\n    const books = (0, $8nUlx.getElement)(\".books\");\n    books.addEventListener(\"click\", (event)=>{\n        const target = event.target.closest(\"[data-url]\");\n        if (!target) return;\n        event.preventDefault();\n        const url = target.getAttribute(\"data-url\");\n        window.location.href = url;\n    });\n};\n\n});\n\nconst $4db2a84c113292af$var$timer = (ms)=>new Promise((_, rej)=>setTimeout(rej.bind(undefined, \"Response Timeout!! Internet Connection too slow\"), ms));\nconst $4db2a84c113292af$export$7a171f172be0782e = async (url)=>{\n    try {\n        const response = await Promise.race([\n            fetch(url),\n            $4db2a84c113292af$var$timer(7000)\n        ]);\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        return response.json();\n    } catch (error) {\n        throw error;\n    }\n};\nconst $4db2a84c113292af$export$4e87299c28e9a838 = async (url, data)=>{\n    try {\n        const response = await fetch(url, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        if (response.status !== 200) return [];\n        return response.json();\n    } catch (error) {\n        throw error;\n    }\n};\n\n\nconst $e88bdb92d8dec57e$export$c8422a29a076b4c0 = {\n    API_URL_GOOGLE: \"https://www.googleapis.com/books/v1/volumes\",\n    API_KEY_GOOGLE: \"AIzaSyCEPuCpP9wRZ6zmaA6EIQJzY8zOT5Eyhsg\",\n    API_KEY_MOCKUP: \"5aab411c-74db-45bf-8afc-70c5aec1e534\",\n    BGREMOVER: \"http://127.0.0.1:5000/remove_bg\",\n    RECOMMEND_URL: \"http://127.0.0.1:5000/suggestions\",\n    TOP_50: \"http://127.0.0.1:5000/top50\",\n    RESULT_PER_PAGE: 9\n};\n\n\n\nvar $8nUlx = parcelRequire(\"8nUlx\");\nconst $76f0a160c0a2b9af$var$paginationBtns = (0, $8nUlx.getElement)(\".pagination__btns\");\nconst $76f0a160c0a2b9af$var$prevBtn = (0, $8nUlx.getElement)(\".prev.pagination__btn\");\nconst $76f0a160c0a2b9af$var$nextBtn = (0, $8nUlx.getElement)(\".next.pagination__btn\");\nconst $76f0a160c0a2b9af$var$specificPageBtn = (0, $8nUlx.getElements)(\".page.pagination__btn\");\nconst $76f0a160c0a2b9af$var$pageNumberElement = (0, $8nUlx.getElement)(\"#page-number\");\nclass $76f0a160c0a2b9af$export$750fbdecbe28d3bf {\n    constructor(pages){\n        this.currentPage = 1;\n        this.pages = pages;\n    }\n    handlePagination = (callback)=>{\n        $76f0a160c0a2b9af$var$paginationBtns.addEventListener(\"click\", (e)=>{\n            const target = e.target;\n            if (!target.classList.contains(\"pagination__btn\")) return;\n            const pageNumber = parseInt(target.dataset.pageNumber);\n            console.log(pageNumber);\n            if (pageNumber <= 0 || pageNumber > this.pages) return;\n            callback(pageNumber);\n        });\n    };\n    updateBtns = ()=>{\n        $76f0a160c0a2b9af$var$prevBtn.dataset.pageNumber = this.currentPage - 1;\n        $76f0a160c0a2b9af$var$nextBtn.dataset.pageNumber = this.currentPage + 1;\n        (0, $8nUlx.getElement)(\".pagination__btn--active\")?.classList?.remove(\"pagination__btn--active\");\n        const pageNumbers = [];\n        for(let i = 1; i <= 5; i++){\n            const pageNumber = this.currentPage - 3 + i;\n            if (pageNumber > 0 && pageNumber <= this.pages) pageNumbers.push(pageNumber);\n        }\n        console.log(pageNumbers);\n        pageNumbers.slice(-3).forEach((pageNumber, index)=>{\n            $76f0a160c0a2b9af$var$specificPageBtn[index].dataset.pageNumber = pageNumber;\n            $76f0a160c0a2b9af$var$specificPageBtn[index].textContent = pageNumber;\n        });\n        $76f0a160c0a2b9af$var$specificPageBtn.forEach((btn)=>{\n            if (parseInt(btn.dataset.pageNumber) === this.currentPage) btn.classList.add(\"pagination__btn--active\");\n        });\n        $76f0a160c0a2b9af$var$pageNumberElement.value = this.currentPage;\n    };\n    setPageNumber = (page)=>{\n        this.currentPage = page;\n        this.updateBtns();\n    };\n}\n\n\n\nvar $8nUlx = parcelRequire(\"8nUlx\");\n\nvar $4WPy0 = parcelRequire(\"4WPy0\");\nconst $324b6a8439557bd4$var$url = (0, $e88bdb92d8dec57e$export$c8422a29a076b4c0).TOP_50;\nconst $324b6a8439557bd4$var$RESULT_PER_PAGE = (0, $e88bdb92d8dec57e$export$c8422a29a076b4c0).RESULT_PER_PAGE;\nlet $324b6a8439557bd4$var$data = [];\nlet $324b6a8439557bd4$var$currentRender = [];\nlet $324b6a8439557bd4$var$currentPage = 1;\nlet $324b6a8439557bd4$var$paginationHandler;\nconst $324b6a8439557bd4$var$bookScript = (name, authorName, imageUrl)=>`\r\n    <div class=\"book book-details\">\r\n        <div class=\"book-cover card-front\">\r\n            <img src=\"${imageUrl}\" alt=\"Book cover\" />\r\n        </div>\r\n        <div class=\"book-info card-back\">\r\n            <h3 class=\"book-title \">${name}</h3>\r\n            <p class=\"book-author\">${authorName}</p>\r\n            <a href=\"#\" data-url=\"/book?book=${encodeURIComponent(name)}\" class=\"btn btn-primary\">Read More</a>\r\n        </div>\r\n    </div>\r\n`;\nconst $324b6a8439557bd4$var$renderBooks = (books)=>{\n    const container = document.querySelector(\".books\");\n    container.innerHTML = \"\";\n    books.forEach((book)=>{\n        container.innerHTML += $324b6a8439557bd4$var$bookScript(book.title, book.author, book.image);\n    });\n};\nconst $324b6a8439557bd4$var$goToPage = function(page) {\n    $324b6a8439557bd4$var$currentPage = page;\n    this.setPageNumber($324b6a8439557bd4$var$currentPage);\n    const lowerBound = ($324b6a8439557bd4$var$currentPage - 1) * $324b6a8439557bd4$var$RESULT_PER_PAGE;\n    const upperBound = Math.min($324b6a8439557bd4$var$data.length, $324b6a8439557bd4$var$currentPage * $324b6a8439557bd4$var$RESULT_PER_PAGE);\n    (0, $8nUlx.setElementText)(\".current-page\", $324b6a8439557bd4$var$currentPage);\n    (0, $8nUlx.setElementText)(\".low-limit\", lowerBound + 1);\n    (0, $8nUlx.setElementText)(\".high-limit\", upperBound);\n    $324b6a8439557bd4$var$currentRender = $324b6a8439557bd4$var$data.slice(lowerBound, upperBound);\n    $324b6a8439557bd4$var$renderBooks($324b6a8439557bd4$var$currentRender);\n};\nconst $324b6a8439557bd4$var$Sorter = {\n    \"a-z\": (a, b)=>a.title.localeCompare(b.title),\n    \"z-a\": (a, b)=>b.title.localeCompare(a.title)\n};\nconst $324b6a8439557bd4$var$handleSorting = (sortType)=>{\n    $324b6a8439557bd4$var$data.sort($324b6a8439557bd4$var$Sorter[sortType]);\n    $324b6a8439557bd4$var$goToPage.call($324b6a8439557bd4$var$paginationHandler, 1);\n};\nconst $324b6a8439557bd4$var$sortBtns = document.querySelector(\"#sort-by\");\n$324b6a8439557bd4$var$sortBtns.addEventListener(\"change\", (e)=>{\n    const sortType = e.target.value;\n    $324b6a8439557bd4$var$handleSorting(sortType);\n});\n(0, $4db2a84c113292af$export$7a171f172be0782e)($324b6a8439557bd4$var$url).then((responseData)=>{\n    $324b6a8439557bd4$var$data = Object.entries(responseData).map(([key, value])=>{\n        return {\n            title: key.replace(/\\\\\"|\\\\/g, '\"'),\n            ...value\n        };\n    });\n    (0, $4WPy0.handleBatchDataUrl)();\n    const nPages = Math.ceil($324b6a8439557bd4$var$data.length / $324b6a8439557bd4$var$RESULT_PER_PAGE);\n    $324b6a8439557bd4$var$paginationHandler = new (0, $76f0a160c0a2b9af$export$750fbdecbe28d3bf)(nPages);\n    $324b6a8439557bd4$var$goToPage.call($324b6a8439557bd4$var$paginationHandler, 1);\n    $324b6a8439557bd4$var$paginationHandler.handlePagination($324b6a8439557bd4$var$goToPage.bind($324b6a8439557bd4$var$paginationHandler));\n});\n\n\n//# sourceMappingURL=top50.af6c989b.js.map\n","export const getElement = (selector) => document.querySelector(selector);\r\nexport const getElements = (selector) => document.querySelectorAll(selector);\r\nexport const setElementText = (selector, text) => {\r\n  getElements(selector).forEach((element) => (element.textContent = text));\r\n};\r\n\r\nexport function setBookCoverImage(imageUrl) {\r\n  imageUrl = imageUrl.replace(\"http://\", \"https://\");\r\n  getElement(\"#home-section\").style.background = `url${imageUrl}`;\r\n}\r\n\r\nexport function setError(msg, parent = \"#whole-content\") {\r\n  const error = `<div class=\"error\">${msg}</div>`;\r\n  getElement(parent).insertAdjacentHTML(\"beforeend\", error);\r\n}\r\n","import { getElement } from \"./domUtils\";\r\n\r\nexport const handleDataUrl = () => {\r\n  const dataUrl = document.querySelectorAll(\"[data-url]\");\r\n  console.log(dataUrl);\r\n  dataUrl.forEach((element) => {\r\n    const url = element.getAttribute(\"data-url\");\r\n    element.addEventListener(\"click\", (event) => {\r\n      event.preventDefault();\r\n      console.log(url);\r\n      window.location.href = url;\r\n    });\r\n  });\r\n};\r\n\r\nexport const handleBatchDataUrl = () => {\r\n  const books = getElement(\".books\");\r\n  books.addEventListener(\"click\", (event) => {\r\n    const target = event.target.closest(\"[data-url]\");\r\n    if (!target) return;\r\n    event.preventDefault();\r\n    const url = target.getAttribute(\"data-url\");\r\n    window.location.href = url;\r\n  });\r\n};\r\n","import { getData } from \"./api.js\";\r\nimport { API_CONFIG } from \"./config.js\";\r\nimport { PaginationHandler } from \"./paginationHandler.js\";\r\nimport { setElementText } from \"./domUtils.js\";\r\nimport { handleBatchDataUrl } from \"./dataUrlHandler.js\";\r\n\r\nconst url = API_CONFIG.TOP_50;\r\nconst RESULT_PER_PAGE = API_CONFIG.RESULT_PER_PAGE;\r\nlet data = [];\r\nlet currentRender = [];\r\nlet currentPage = 1;\r\nlet paginationHandler;\r\n\r\nconst bookScript = (name, authorName, imageUrl) =>\r\n  `\r\n    <div class=\"book book-details\">\r\n        <div class=\"book-cover card-front\">\r\n            <img src=\"${imageUrl}\" alt=\"Book cover\" />\r\n        </div>\r\n        <div class=\"book-info card-back\">\r\n            <h3 class=\"book-title \">${name}</h3>\r\n            <p class=\"book-author\">${authorName}</p>\r\n            <a href=\"#\" data-url=\"/book?book=${encodeURIComponent(\r\n              name\r\n            )}\" class=\"btn btn-primary\">Read More</a>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\nconst renderBooks = (books) => {\r\n  const container = document.querySelector(\".books\");\r\n  container.innerHTML = \"\";\r\n  books.forEach((book) => {\r\n    container.innerHTML += bookScript(book.title, book.author, book.image);\r\n  });\r\n};\r\n\r\nconst goToPage = function (page) {\r\n  currentPage = page;\r\n  this.setPageNumber(currentPage);\r\n  const lowerBound = (currentPage - 1) * RESULT_PER_PAGE;\r\n  const upperBound = Math.min(data.length, currentPage * RESULT_PER_PAGE);\r\n  setElementText(\".current-page\", currentPage);\r\n  setElementText(\".low-limit\", lowerBound + 1);\r\n  setElementText(\".high-limit\", upperBound);\r\n\r\n  currentRender = data.slice(lowerBound, upperBound);\r\n  renderBooks(currentRender);\r\n};\r\n\r\nconst Sorter = {\r\n  \"a-z\": (a, b) => a.title.localeCompare(b.title),\r\n  \"z-a\": (a, b) => b.title.localeCompare(a.title),\r\n};\r\n\r\nconst handleSorting = (sortType) => {\r\n  data.sort(Sorter[sortType]);\r\n  goToPage.call(paginationHandler, 1);\r\n};\r\n\r\nconst sortBtns = document.querySelector(\"#sort-by\");\r\nsortBtns.addEventListener(\"change\", (e) => {\r\n  const sortType = e.target.value;\r\n  handleSorting(sortType);\r\n});\r\n\r\ngetData(url).then((responseData) => {\r\n  data = Object.entries(responseData).map(([key, value]) => {\r\n    return {\r\n      title: key.replace(/\\\\\"|\\\\/g, '\"'),\r\n      ...value,\r\n    };\r\n  });\r\n\r\n  handleBatchDataUrl();\r\n  const nPages = Math.ceil(data.length / RESULT_PER_PAGE);\r\n  paginationHandler = new PaginationHandler(nPages);\r\n  goToPage.call(paginationHandler, 1);\r\n  paginationHandler.handlePagination(goToPage.bind(paginationHandler));\r\n});\r\n","const timer = (ms) =>\r\n  new Promise((_, rej) =>\r\n    setTimeout(\r\n      rej.bind(this, \"Response Timeout!! Internet Connection too slow\"),\r\n      ms\r\n    )\r\n  );\r\n\r\nexport const getData = async (url) => {\r\n  try {\r\n    const response = await Promise.race([fetch(url), timer(7000)]);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    return response.json();\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const postData = async (url, data) => {\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    if (response.status !== 200) return [];\r\n\r\n    return response.json();\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n","export const API_CONFIG = {\r\n  API_URL_GOOGLE: \"https://www.googleapis.com/books/v1/volumes\",\r\n  API_KEY_GOOGLE: \"AIzaSyCEPuCpP9wRZ6zmaA6EIQJzY8zOT5Eyhsg\",\r\n  API_KEY_MOCKUP: \"5aab411c-74db-45bf-8afc-70c5aec1e534\",\r\n  BGREMOVER: \"http://127.0.0.1:5000/remove_bg\",\r\n  RECOMMEND_URL: \"http://127.0.0.1:5000/suggestions\",\r\n  TOP_50: \"http://127.0.0.1:5000/top50\",\r\n  RESULT_PER_PAGE: 9,\r\n};\r\n","import { getElement, getElements } from \"./domUtils\";\r\n\r\nconst paginationBtns = getElement(\".pagination__btns\");\r\nconst prevBtn = getElement(\".prev.pagination__btn\");\r\nconst nextBtn = getElement(\".next.pagination__btn\");\r\nconst specificPageBtn = getElements(\".page.pagination__btn\");\r\nconst pageNumberElement = getElement(\"#page-number\");\r\n\r\nexport class PaginationHandler {\r\n  constructor(pages) {\r\n    this.currentPage = 1;\r\n    this.pages = pages;\r\n  }\r\n\r\n  handlePagination = (callback) => {\r\n    paginationBtns.addEventListener(\"click\", (e) => {\r\n      const target = e.target;\r\n      if (!target.classList.contains(\"pagination__btn\")) return;\r\n\r\n      const pageNumber = parseInt(target.dataset.pageNumber);\r\n      console.log(pageNumber);\r\n      if (pageNumber <= 0 || pageNumber > this.pages) return;\r\n      callback(pageNumber);\r\n    });\r\n  };\r\n\r\n  updateBtns = () => {\r\n    prevBtn.dataset.pageNumber = this.currentPage - 1;\r\n    nextBtn.dataset.pageNumber = this.currentPage + 1;\r\n    getElement(\".pagination__btn--active\")?.classList?.remove(\r\n      \"pagination__btn--active\"\r\n    );\r\n\r\n    const pageNumbers = [];\r\n    for (let i = 1; i <= 5; i++) {\r\n      const pageNumber = this.currentPage - 3 + i;\r\n      if (pageNumber > 0 && pageNumber <= this.pages)\r\n        pageNumbers.push(pageNumber);\r\n    }\r\n    console.log(pageNumbers);\r\n    pageNumbers.slice(-3).forEach((pageNumber, index) => {\r\n      specificPageBtn[index].dataset.pageNumber = pageNumber;\r\n      specificPageBtn[index].textContent = pageNumber;\r\n    });\r\n\r\n    specificPageBtn.forEach((btn) => {\r\n      if (parseInt(btn.dataset.pageNumber) === this.currentPage)\r\n        btn.classList.add(\"pagination__btn--active\");\r\n    });\r\n    pageNumberElement.value = this.currentPage;\r\n  };\r\n\r\n  setPageNumber = (page) => {\r\n    this.currentPage = page;\r\n    this.updateBtns();\r\n  };\r\n}\r\n"],"names":["$324b6a8439557bd4$var$paginationHandler","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$61ac2def64847fa8$export$d16800b7e59a8051","$61ac2def64847fa8$export$73eac51a39d6b0eb","$61ac2def64847fa8$export$1193aae213924971","selector","document","querySelector","querySelectorAll","text","forEach","element","textContent","$39a490758e6557ae$export$2cb4d324af6458cf","$39a490758e6557ae$export$8718b2c0e8da1d9c","$8nUlx","dataUrl","console","log","url","getAttribute","addEventListener","event","preventDefault","window","location","href","books","getElement","target","closest","$4db2a84c113292af$var$timer","ms","Promise","_","rej","setTimeout","bind","undefined","$4db2a84c113292af$export$7a171f172be0782e","response","race","fetch","ok","status","json","error","$76f0a160c0a2b9af$var$paginationBtns","$76f0a160c0a2b9af$var$prevBtn","$76f0a160c0a2b9af$var$nextBtn","$76f0a160c0a2b9af$var$specificPageBtn","getElements","$76f0a160c0a2b9af$var$pageNumberElement","$76f0a160c0a2b9af$export$750fbdecbe28d3bf","constructor","pages","currentPage","handlePagination","callback","classList","contains","pageNumber","parseInt","dataset","updateBtns","remove","pageNumbers","i","push","slice","index","btn","add","value","setPageNumber","page","$4WPy0","$324b6a8439557bd4$var$data","$324b6a8439557bd4$var$currentPage","$324b6a8439557bd4$var$bookScript","name","authorName","imageUrl","encodeURIComponent","$324b6a8439557bd4$var$renderBooks","container","innerHTML","book","title","author","image","$324b6a8439557bd4$var$goToPage","lowerBound","upperBound","Math","min","length","setElementText","$324b6a8439557bd4$var$Sorter","a","b","localeCompare","$324b6a8439557bd4$var$handleSorting","sortType","sort","$324b6a8439557bd4$var$sortBtns","then","responseData","entries","map","key","replace","handleBatchDataUrl","ceil"],"version":3,"file":"top50.af6c989b.js.map"}