{"mappings":"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","sources":["<anon>","static/js/top50handler.js","static/js/paginationHandler.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire2955\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire2955\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $6FAcS = parcelRequire(\"6FAcS\");\n\nvar $jXPZz = parcelRequire(\"jXPZz\");\n\nvar $8nUlx = parcelRequire(\"8nUlx\");\nconst $76f0a160c0a2b9af$var$paginationBtns = (0, $8nUlx.getElement)(\".pagination__btns\");\nconst $76f0a160c0a2b9af$var$prevBtn = (0, $8nUlx.getElement)(\".prev.pagination__btn\");\nconst $76f0a160c0a2b9af$var$nextBtn = (0, $8nUlx.getElement)(\".next.pagination__btn\");\nconst $76f0a160c0a2b9af$var$specificPageBtn = (0, $8nUlx.getElements)(\".page.pagination__btn\");\nconst $76f0a160c0a2b9af$var$pageNumberElement = (0, $8nUlx.getElement)(\"#page-number\");\nclass $76f0a160c0a2b9af$export$750fbdecbe28d3bf {\n    constructor(pages){\n        this.currentPage = 1;\n        this.pages = pages;\n    }\n    handlePagination = (callback)=>{\n        $76f0a160c0a2b9af$var$paginationBtns.addEventListener(\"click\", (e)=>{\n            const target = e.target;\n            if (!target.classList.contains(\"pagination__btn\")) return;\n            const pageNumber = parseInt(target.dataset.pageNumber);\n            if (pageNumber <= 0 || pageNumber > this.pages) return;\n            callback(pageNumber);\n        });\n    };\n    updateBtns = ()=>{\n        $76f0a160c0a2b9af$var$prevBtn.dataset.pageNumber = this.currentPage - 1;\n        $76f0a160c0a2b9af$var$nextBtn.dataset.pageNumber = this.currentPage + 1;\n        (0, $8nUlx.getElement)(\".pagination__btn--active\")?.classList?.remove(\"pagination__btn--active\");\n        const pageNumbers = [];\n        for(let i = 1; i <= 5; i++){\n            const pageNumber = this.currentPage - 3 + i;\n            if (pageNumber > 0 && pageNumber <= this.pages) pageNumbers.push(pageNumber);\n        }\n        pageNumbers.slice(-3).forEach((pageNumber, index)=>{\n            $76f0a160c0a2b9af$var$specificPageBtn[index].dataset.pageNumber = pageNumber;\n            $76f0a160c0a2b9af$var$specificPageBtn[index].textContent = pageNumber;\n        });\n        $76f0a160c0a2b9af$var$specificPageBtn.forEach((btn)=>{\n            if (parseInt(btn.dataset.pageNumber) === this.currentPage) btn.classList.add(\"pagination__btn--active\");\n        });\n        $76f0a160c0a2b9af$var$pageNumberElement.value = this.currentPage;\n    };\n    setPageNumber = (page)=>{\n        this.currentPage = page;\n        this.updateBtns();\n    };\n}\n\n\n\nvar $8nUlx = parcelRequire(\"8nUlx\");\n\nvar $4WPy0 = parcelRequire(\"4WPy0\");\nconst $324b6a8439557bd4$var$url = (0, $jXPZz.API_CONFIG).TOP_50;\nconst $324b6a8439557bd4$var$RESULT_PER_PAGE = (0, $jXPZz.API_CONFIG).RESULT_PER_PAGE;\nlet $324b6a8439557bd4$var$data = [];\nlet $324b6a8439557bd4$var$currentRender = [];\nlet $324b6a8439557bd4$var$currentPage = 1;\nlet $324b6a8439557bd4$var$paginationHandler;\nconst $324b6a8439557bd4$var$bookScript = (name, authorName, imageUrl)=>`\r\n    <div class=\"book book-details\">\r\n        <div class=\"book-cover card-front\">\r\n            <img src=\"${imageUrl}\" alt=\"Book cover\" />\r\n        </div>\r\n        <div class=\"book-info card-back\">\r\n            <h3 class=\"book-title \">${name}</h3>\r\n            <p class=\"book-author\">${authorName}</p>\r\n            <a href=\"#\" data-url=\"/book?book=${encodeURIComponent(name)}\" class=\"btn btn-primary\">Read More</a>\r\n        </div>\r\n    </div>\r\n`;\nconst $324b6a8439557bd4$var$renderBooks = (books)=>{\n    const container = document.querySelector(\".books\");\n    container.innerHTML = \"\";\n    books.forEach((book)=>{\n        container.innerHTML += $324b6a8439557bd4$var$bookScript(book.title, book.author, book.image);\n    });\n};\nconst $324b6a8439557bd4$var$goToPage = function(page) {\n    $324b6a8439557bd4$var$currentPage = page;\n    this.setPageNumber($324b6a8439557bd4$var$currentPage);\n    const lowerBound = ($324b6a8439557bd4$var$currentPage - 1) * $324b6a8439557bd4$var$RESULT_PER_PAGE;\n    const upperBound = Math.min($324b6a8439557bd4$var$data.length, $324b6a8439557bd4$var$currentPage * $324b6a8439557bd4$var$RESULT_PER_PAGE);\n    (0, $8nUlx.setElementText)(\".current-page\", $324b6a8439557bd4$var$currentPage);\n    (0, $8nUlx.setElementText)(\".low-limit\", lowerBound + 1);\n    (0, $8nUlx.setElementText)(\".high-limit\", upperBound);\n    $324b6a8439557bd4$var$currentRender = $324b6a8439557bd4$var$data.slice(lowerBound, upperBound);\n    $324b6a8439557bd4$var$renderBooks($324b6a8439557bd4$var$currentRender);\n};\nconst $324b6a8439557bd4$var$Sorter = {\n    \"a-z\": (a, b)=>a.title.localeCompare(b.title),\n    \"z-a\": (a, b)=>b.title.localeCompare(a.title)\n};\nconst $324b6a8439557bd4$var$handleSorting = (sortType)=>{\n    $324b6a8439557bd4$var$data.sort($324b6a8439557bd4$var$Sorter[sortType]);\n    $324b6a8439557bd4$var$goToPage.call($324b6a8439557bd4$var$paginationHandler, 1);\n};\nconst $324b6a8439557bd4$var$sortBtns = document.querySelector(\"#sort-by\");\n$324b6a8439557bd4$var$sortBtns.addEventListener(\"change\", (e)=>{\n    const sortType = e.target.value;\n    $324b6a8439557bd4$var$handleSorting(sortType);\n});\n(0, $6FAcS.getData)($324b6a8439557bd4$var$url).then((responseData)=>{\n    $324b6a8439557bd4$var$data = Object.entries(responseData).map(([key, value])=>{\n        return {\n            title: key.replace(/\\\\\"|\\\\/g, '\"'),\n            ...value\n        };\n    });\n    (0, $4WPy0.handleBatchDataUrl)();\n    const nPages = Math.ceil($324b6a8439557bd4$var$data.length / $324b6a8439557bd4$var$RESULT_PER_PAGE);\n    $324b6a8439557bd4$var$paginationHandler = new (0, $76f0a160c0a2b9af$export$750fbdecbe28d3bf)(nPages);\n    $324b6a8439557bd4$var$goToPage.call($324b6a8439557bd4$var$paginationHandler, 1);\n    $324b6a8439557bd4$var$paginationHandler.handlePagination($324b6a8439557bd4$var$goToPage.bind($324b6a8439557bd4$var$paginationHandler));\n});\n\n\n//# sourceMappingURL=top50.da0d47e3.js.map\n","import { getData } from \"./api.js\";\r\nimport { API_CONFIG } from \"./config.js\";\r\nimport { PaginationHandler } from \"./paginationHandler.js\";\r\nimport { setElementText } from \"./domUtils.js\";\r\nimport { handleBatchDataUrl } from \"./dataUrlHandler.js\";\r\n\r\nconst url = API_CONFIG.TOP_50;\r\nconst RESULT_PER_PAGE = API_CONFIG.RESULT_PER_PAGE;\r\nlet data = [];\r\nlet currentRender = [];\r\nlet currentPage = 1;\r\nlet paginationHandler;\r\n\r\nconst bookScript = (name, authorName, imageUrl) =>\r\n  `\r\n    <div class=\"book book-details\">\r\n        <div class=\"book-cover card-front\">\r\n            <img src=\"${imageUrl}\" alt=\"Book cover\" />\r\n        </div>\r\n        <div class=\"book-info card-back\">\r\n            <h3 class=\"book-title \">${name}</h3>\r\n            <p class=\"book-author\">${authorName}</p>\r\n            <a href=\"#\" data-url=\"/book?book=${encodeURIComponent(\r\n              name\r\n            )}\" class=\"btn btn-primary\">Read More</a>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\nconst renderBooks = (books) => {\r\n  const container = document.querySelector(\".books\");\r\n  container.innerHTML = \"\";\r\n  books.forEach((book) => {\r\n    container.innerHTML += bookScript(book.title, book.author, book.image);\r\n  });\r\n};\r\n\r\nconst goToPage = function (page) {\r\n  currentPage = page;\r\n  this.setPageNumber(currentPage);\r\n  const lowerBound = (currentPage - 1) * RESULT_PER_PAGE;\r\n  const upperBound = Math.min(data.length, currentPage * RESULT_PER_PAGE);\r\n  setElementText(\".current-page\", currentPage);\r\n  setElementText(\".low-limit\", lowerBound + 1);\r\n  setElementText(\".high-limit\", upperBound);\r\n\r\n  currentRender = data.slice(lowerBound, upperBound);\r\n  renderBooks(currentRender);\r\n};\r\n\r\nconst Sorter = {\r\n  \"a-z\": (a, b) => a.title.localeCompare(b.title),\r\n  \"z-a\": (a, b) => b.title.localeCompare(a.title),\r\n};\r\n\r\nconst handleSorting = (sortType) => {\r\n  data.sort(Sorter[sortType]);\r\n  goToPage.call(paginationHandler, 1);\r\n};\r\n\r\nconst sortBtns = document.querySelector(\"#sort-by\");\r\nsortBtns.addEventListener(\"change\", (e) => {\r\n  const sortType = e.target.value;\r\n  handleSorting(sortType);\r\n});\r\n\r\ngetData(url).then((responseData) => {\r\n  data = Object.entries(responseData).map(([key, value]) => {\r\n    return {\r\n      title: key.replace(/\\\\\"|\\\\/g, '\"'),\r\n      ...value,\r\n    };\r\n  });\r\n\r\n  handleBatchDataUrl();\r\n  const nPages = Math.ceil(data.length / RESULT_PER_PAGE);\r\n  paginationHandler = new PaginationHandler(nPages);\r\n  goToPage.call(paginationHandler, 1);\r\n  paginationHandler.handlePagination(goToPage.bind(paginationHandler));\r\n});\r\n","import { getElement, getElements } from \"./domUtils\";\r\n\r\nconst paginationBtns = getElement(\".pagination__btns\");\r\nconst prevBtn = getElement(\".prev.pagination__btn\");\r\nconst nextBtn = getElement(\".next.pagination__btn\");\r\nconst specificPageBtn = getElements(\".page.pagination__btn\");\r\nconst pageNumberElement = getElement(\"#page-number\");\r\n\r\nexport class PaginationHandler {\r\n  constructor(pages) {\r\n    this.currentPage = 1;\r\n    this.pages = pages;\r\n  }\r\n\r\n  handlePagination = (callback) => {\r\n    paginationBtns.addEventListener(\"click\", (e) => {\r\n      const target = e.target;\r\n      if (!target.classList.contains(\"pagination__btn\")) return;\r\n\r\n      const pageNumber = parseInt(target.dataset.pageNumber);\r\n      if (pageNumber <= 0 || pageNumber > this.pages) return;\r\n      callback(pageNumber);\r\n    });\r\n  };\r\n\r\n  updateBtns = () => {\r\n    prevBtn.dataset.pageNumber = this.currentPage - 1;\r\n    nextBtn.dataset.pageNumber = this.currentPage + 1;\r\n    getElement(\".pagination__btn--active\")?.classList?.remove(\r\n      \"pagination__btn--active\"\r\n    );\r\n\r\n    const pageNumbers = [];\r\n    for (let i = 1; i <= 5; i++) {\r\n      const pageNumber = this.currentPage - 3 + i;\r\n      if (pageNumber > 0 && pageNumber <= this.pages)\r\n        pageNumbers.push(pageNumber);\r\n    }\r\n    pageNumbers.slice(-3).forEach((pageNumber, index) => {\r\n      specificPageBtn[index].dataset.pageNumber = pageNumber;\r\n      specificPageBtn[index].textContent = pageNumber;\r\n    });\r\n\r\n    specificPageBtn.forEach((btn) => {\r\n      if (parseInt(btn.dataset.pageNumber) === this.currentPage)\r\n        btn.classList.add(\"pagination__btn--active\");\r\n    });\r\n    pageNumberElement.value = this.currentPage;\r\n  };\r\n\r\n  setPageNumber = (page) => {\r\n    this.currentPage = page;\r\n    this.updateBtns();\r\n  };\r\n}\r\n"],"names":["$324b6a8439557bd4$var$paginationHandler","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$6FAcS","$jXPZz","$8nUlx","$76f0a160c0a2b9af$var$paginationBtns","getElement","$76f0a160c0a2b9af$var$prevBtn","$76f0a160c0a2b9af$var$nextBtn","$76f0a160c0a2b9af$var$specificPageBtn","getElements","$76f0a160c0a2b9af$var$pageNumberElement","$76f0a160c0a2b9af$export$750fbdecbe28d3bf","constructor","pages","currentPage","handlePagination","callback","addEventListener","e","target","classList","contains","pageNumber","parseInt","dataset","updateBtns","remove","pageNumbers","i","push","slice","forEach","index","textContent","btn","add","value","setPageNumber","page","$4WPy0","$324b6a8439557bd4$var$url","API_CONFIG","TOP_50","$324b6a8439557bd4$var$RESULT_PER_PAGE","RESULT_PER_PAGE","$324b6a8439557bd4$var$data","$324b6a8439557bd4$var$currentPage","$324b6a8439557bd4$var$bookScript","name","authorName","imageUrl","encodeURIComponent","$324b6a8439557bd4$var$renderBooks","books","container","document","querySelector","innerHTML","book","title","author","image","$324b6a8439557bd4$var$goToPage","lowerBound","upperBound","Math","min","length","setElementText","$324b6a8439557bd4$var$Sorter","a","b","localeCompare","$324b6a8439557bd4$var$handleSorting","sortType","sort","$324b6a8439557bd4$var$sortBtns","getData","then","responseData","Object","entries","map","key","replace","handleBatchDataUrl","ceil","bind"],"version":3,"file":"top50.da0d47e3.js.map"}